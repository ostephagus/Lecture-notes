\documentclass[../Main.tex]{subfiles}

\begin{document}
\section{Sequences}
\subsection{Defining Limits}
\begin{definition}{Limit of a sequence}
    Consider a sequence of real numbers, $a_1, a_2, a_3, \cdots$ or $(a_n)_{n=1}^\infty$ and $a_n \in \R$.\par
    We say that the sequence \underline{tends to the limit $a$} as $n$ tends to infinity if, given $\epsilon > 0$ there exists a natural number $N$ such that
    \begin{equation}
        |a_n - a| < \epsilon~\forall n \geq N
        \label{eqnSequenceConvergence}
    \end{equation}
\end{definition}
\begin{remarks}
    \item $N$ depends on $\epsilon$
    \item The inequality can be non-strict without changing the definition
    \item Any fixed multiple of $\epsilon$ on the RHS does not change the definition (replace $\epsilon$ with a multiple to return to 1 on RHS)
    \item Here $a$ must be finite and real.
\end{remarks}
\subsection{Monotonic Sequences}
If $a_n \leq a_{n+1}~\forall n$, we say $(a_n)$ is increasing.\par
If $a_n \geq a_{n+1}~\forall n$, we say $(a_n)$ is decreasing.\par
Sequences can be strictly increasing or strictly decreasing if the inequalities above are strict.\par
If $(a_n)$ is either increasing or decreasing then it is \underline{monotone}.\par
\begin{proposition}[Fundamental axiom of real numbers]
    An increasing sequence of real numbers that is bounded above converges.
\end{proposition}
\begin{remarks}
    \item Equivalently, every decreasing sequence bounded below converges.
    \item Note that this is equivalent to the least upper bound axiom from IA Numbers and Sets.
    \item This is not true for the rational numbers. Consider the sequence of rational approximations to $\sqrt{2}$. This does not have a limit in the rational numbers.
\end{remarks}
\subsection{Facts About Sequences}
\begin{propositions}{
        \label{propsSequenceFacts}
    }
    \item If $a_n \rightarrow a$ and $a_n \rightarrow b$, then $a = b$. \label{propSequenceLimitUnique}
    \item If $a_n \rightarrow a$ and $n_1 < n_2 < n_3 < \cdots$ is a sequence of natural numbers, then $a_{n_j} \rightarrow a$ as $j \rightarrow \infty$. \label{propSubsequenceLimit}
    \item If $a_n = c~\forall n$, then $a_n \rightarrow c$.\label{propConstantLimit}
    \item If $a_n \rightarrow a$ and $b_n \rightarrow b$, $a_n + b_n \rightarrow a + b$.\label{propSumOfSequences}
    \item If $a_n \rightarrow a$ and $b_n \rightarrow b$, then $a_n b_n \rightarrow ab$.\label{propProductOfSequences}
    \item If $a_n \rightarrow a$, $a_n \neq 0, a \neq 0$, then $\frac{1}{a_n} \rightarrow \frac{1}{a}$ \label{propReciprocalSequence}
    \item If $a_n$ is bounded above by $A$, and $a_n \rightarrow a$, then $a \leq A$.\label{propBoundedLimit}
    \item If $a_n \rightarrow a$ and $c_n \rightarrow a$ as $n \rightarrow \infty$, and we have $b_n$ such that $a_n \leq b_n \leq c_n$, then $b_n \rightarrow a$. \label{propSequenceSandwich}
\end{propositions}
\begin{proof}
    \begin{enumerate}
        \item Limit is unique:
            For any $\epsilon > 0$, we can find $N_1(\epsilon)$ and $N_2(\epsilon)$ such that:
            \begin{equation*}
                n \geq N_1 \implies |a_n - a| < \epsilon
            \end{equation*}
            and
            \begin{equation*}
                n \geq N_2 \implies |a_n - b| < \epsilon
            \end{equation*}
            If $n \geq \max{\{N_1, N_2\}}$, then:
            \begin{align*}
                0 \leq |b - a| &= |b - a_n + a_n - a| \\
                &\leq |a_n - b| + |a_n - a| \text{ by triangle inequality} \\
                &\leq 2\epsilon
            \end{align*}
            And since $\epsilon$ was arbitrary, $|b - a| = 0$ and $a = b$. \proofend
        \item Subsequences converge to the same limit:
        Since $n_j < n_{j + 1}$, we must have that $n_{j + 1} \geq n_j + 1$, so by induction we must have that $n_j \geq j$.\par
        Then since $a_n \rightarrow a$, given $\epsilon > 0$ there exists $N(\epsilon)$ such that:
        \begin{equation*}
            n \geq N \implies |a_n - a| < \epsilon
        \end{equation*}
        So if $j \geq N(\epsilon)$ then $n_j \geq N(\epsilon)$ and therefore $|a_{n_j} - a| < \epsilon$. \proofend
        \setcounter{enumi}{4} % Next number is 5
        \item Product of sequences tends to product of limit:
        Since $a_n \rightarrow a$ and $b_n \rightarrow b$, for any $\epsilon > 0$, we can find $N_1(\epsilon)$ and $N_2(\epsilon)$ such that:
            \begin{equation*}
                n \geq N_1 \implies |a_n - a| < \epsilon
            \end{equation*}
            and
            \begin{equation*}
                n \geq N_2 \implies |b_n - b| < \epsilon
            \end{equation*}
            Then:
            \begin{align*}
                |a_n b_n - ab| &= |a_n b_n - a_n b + a_n b - ab| \\
                &\leq |a_n b_n - a_n b| + |a_n b - ab| \\
                &\leq |a_n| |b_n - b| + |b| |a_n - a|
            \end{align*}
            We are nearly there, but note that $a_n$ is not fixed. However, if, for example, $n \geq N_1(1)$, then $|a_n - a| < 1$, so $|a_n| \leq 1 + |a|$, which is fixed.\par
            Therefore, if $n \geq \max{\{N_1(\epsilon), N_1(1), N_2(\epsilon)\}}$, then $|a_n b_n - ab| < (1 + |a| + |b|)\epsilon$, which is a constant multiple so $a_n b_n \rightarrow ab$.
    \end{enumerate}
\end{proof}
\begin{propositions}{
        \label{propSequenceLimits}
    }
    \item The sequence $a_n = \frac{1}{n}$ tends to 0 \label{propReciprocalLimit}
    \item For any $|x| < 1$, then $a_n = x^n$ tends to 0. \label{propPowersLimit}
\end{propositions}
\begin{proof}
    \begin{enumerate}
        \item $a_n = \frac{1}{n}$.\par
            First note that this is a decreasing sequence, bounded below by 0, and so it has a limit $l$ by the Fundamental Axiom.\par
            Consider the sequence $a_{2n} = \frac{1}{2} a_n$.\par
            By Proposition~\ref{propProductOfSequences}, this converges to $\frac{1}{2}l$.\par
            But by proposition~\ref{propSubsequenceLimit}, this subsequence must tend to $l$.\par
            These are equal by proposition~\ref{propSequenceLimitUnique}, so $l = \frac{l}{2}$, and $l = 0$.
        \item $a_n = x^n$, $|x| < 1$.\par
            Suppose that $x$ is non-negative. Then we have that the sequence $x^n$ is decreasing and bounded below by 0, and so converges to $l$.\par
            Now $x^{n+1} = x \times x^n$, and so $a_{n+1}$ converges to $x l$.\par
            But this is a subsequence, and must converge to $l$.\par
            Now $xl = l$, and $l$ must be 0 since $x \neq 1$.\par
            Now consider any $x$ in range. $-|x|^n \leq x^n \leq |x|^n$. By above, $|x|^n$ tends to 0 and so does its negative.\par
            Therefore by proposition~\ref{propSequenceSandwich}, $x^n \rightarrow 0$.
    \end{enumerate}
\end{proof}
\begin{remark}
    When we say a sequence converges, we mean that it converges to a finite limit. There does exist a notion of \textit{tending to infinity} - based on sequence gets larger than, and stays larger than, any number we choose as long as we go far enough along the sequence.
\end{remark}
\begin{definition}{Convergence to infinity}
    Given a sequence $a_n$ and a real number $M$, then if there exists some natural number $N(M)$ such that:
    \begin{equation*}
        a_n > M~\forall n \geq N
    \end{equation*}
    Then $a_n$ tends to infinity.
\end{definition}
\begin{warning}
    Not all the results about finite limits carry over.
\end{warning}
\begin{remark}
    The definition of convergence to a limit still works for complex numbers. We can intuit this as ensuring that all $a_n$ are within a small disk (radius $\epsilon$) of the limit, for all $n \geq N(\epsilon)$.\par
    Propositions \ref{propSequenceLimitUnique} to \ref{propReciprocalSequence} still hold, but due to difficulties with ordering for complex numbers propositions \ref{propBoundedLimit} and \ref{propSequenceSandwich}, and the fundamental axiom do not hold. We have to do extra work to get similar results.
\end{remark}
\begin{lemma}
    If $(z_n)$ is a complex sequence than $z_n \rightarrow z$ if and only if both
    \begin{align*}
        \Re(z_n) &\rightarrow \Re(z) \\
        \Im(z_n) &\rightarrow \Im(z)
    \end{align*}
    \label{lemComplexConvergence}
\end{lemma}
\begin{proof}
    Note that for any complex number $w$:
    \begin{equation}
        \max{\{|\Re(w)|, |\Im(w)|\}} \leq |w| \leq |\Re(w)| + |\Im(w)|
        \label{eqnComplexInequalities}
    \end{equation}
    \begin{proofdirection}{$\Rightarrow$}{Suppose $z_n \rightarrow z$.}
        Then $\forall \epsilon > 0, \exists N(\epsilon), n \geq N \implies |z_n - z| < \epsilon$. But then using inequality~\ref{eqnComplexInequalities}, this also implies:
        \begin{equation*}
            |\Re(z_n) - \Re(z)| < \epsilon \text{ and } |\Im(z_n) - \Im(z)| < \epsilon
        \end{equation*}
        As required.
    \end{proofdirection}
    \begin{proofdirection}{$\Leftarrow$}{Suppose $\Re(z_n) \rightarrow z$ and $\Im(z_n) \rightarrow \Im(z)$.}
        Then for all $\epsilon > 0~\exists N_1(\epsilon), N_2(\epsilon)$:
        \begin{align*}
            n \geq N_1 \implies |\Re(z_n) - \Re(z)| &< \epsilon \\
            n \geq N_2 \implies |\Im(z_n) - \Im(z)| &< \epsilon
        \end{align*}
        Let $N(\epsilon) = \max{\{N_1, N_2\}}$. Then summing the above equations:
        \begin{equation*}
            n \geq N \implies |\Re(z_n - z)| + |\Im(z_n - z)| < 2\epsilon
        \end{equation*}
        Which, by the right side of inequality~\ref{eqnComplexInequalities}, gives the result.
    \end{proofdirection}
\end{proof}
\subsection{Bolzano-Weierstrass Theorem}
\begin{theorem}[Bolzano-Weierstrass Theorem]
    If $x_n \in \R$ and there exists some $K$ such that $|x_n| \leq K~\forall n$, then there must exist a subsequence that converges. That is, for some sequence of increasing natural numbers $n_i$, $x_{n_i} \rightarrow x$.
    \label{thmBolzanoWeierstrass}
\end{theorem}
\begin{remark}
    The theorem does not assert that the sequence is unique. Consider $(-1)^n$. There are two convergent subsequences (that of even terms that converges to 1, that of odd terms that converges to -1).
\end{remark}
\begin{proof}
    First set $a_1 = -k, b_1 = k$ so that all terms of the sequence lie between $a_1$ and $b_1$.\par
    Then let $c$ be the midpoint of the interval: $c = \frac{a_1 + b_1}{2}$.\par
    Either there are infinitely many terms of $x_n$ between $a_1$ and $c$ (case 1), or there are infinitely many terms between $c$ and $b_1$ (case 2).
    Then, if we are in case 1, set $a_2 = a_1, b_2 = c$. If we are not in case 1 then we have case 2 and so set $a_2 = c$, $b_2 = b_1$.\par
    We continue this process of halving the intervals, to get sequences $a_k$ and $b_k$. We have that, by the method of construction, we have:
    \begin{itemize}
        \item infinitely many terms of $x_n$ within $a_k$ and $b_k$
        \item the size of the interval halves each time
        \item $a_k$ is an increasing sequence, $b_k$ is a decreasing sequence.
    \end{itemize}
    Note that now $a_k$ is an increasing sequence bounded above by $b_1$, and $b_k$ is a decreasing sequence bounded below by $a_1$. Therefore let $a_k$ converge to some $a$ and $b_k$ converge to some $b$. But since $b_{k+1} a_{k + 1} = \frac{1}{2}(b_k - a_k)$, we require that $(b - a) = \frac{1}{2}(b - a)$, and so $a = b$.\par
    Recall that, at every stage, we have infinitely many terms of $x_n$ within each interval. Then construct the subsequence $x_{n_i}$ as follows:
    \begin{itemize}
        \item $n_1 = 1$
        \item Let $n_{i + 1}$ be the smallest integer greater than $n_i$ such that:
            \begin{equation*}
                x_{n_{i+1}} \in [a_{j + 1}, b_{j + 1}]
            \end{equation*}
            This is valid because there are infinitely many terms within these intervals.
    \end{itemize}
    Now by proposition~\ref{propSequenceSandwich}, this subsequence converges to $a$.
\end{proof}
\section{Cauchy Sequences}
A Cauchy sequence is an alternate way to characterise sequences and convergence.
\begin{definition}{Cauchy sequence}
    A sequence $a_n$ of real numbers is called a \underline{Cauchy sequence} if, far enough along the sequence, terms get and stay close together. Precisely, this is:\par
    Given $\epsilon > 0$, there exists $N(\epsilon)$ such that for any natural number $m$ and $n$ greater than $N(\epsilon)$,
    \begin{equation*}
        |a_n - a_m| < \epsilon
    \end{equation*}
\end{definition}
We will then show that Cauchy sequences are equivalent to convergent sequences.
\begin{lemma}
    Every convergent sequence is a Cauchy sequence.
    \label{lemConvergeImpliesCauchy}
\end{lemma}
\begin{proof}
    Let $a_n \to a$ as $n \to \infty$. Then for any $\epsilon > 0$, we have $N(\epsilon)$ such that:
    \begin{equation*}
        n > N(\epsilon) \implies |a_n - a| < \epsilon
    \end{equation*}
    Then if $m$ and $n$ are greater than $N(\epsilon)$,
    \begin{align*}
        |a_n - a_m| &= |a_n - a + a_m - a| \\
        &\leq |a_n - a| + |a_m - a| < 2\epsilon
    \end{align*}
\end{proof}
More surprising and more useful is the converse:
\begin{theorem}
    Every Cauchy sequence converges to a finite limit.
    \label{thmCauchyImpliesConverge}
\end{theorem}
\begin{proof}
    Suppose $a_n$ is a Cauchy sequence. We first show that $a_n$ is bounded (to use theorem~\ref{thmBolzanoWeierstrass}).\par
    Then using the property where $\epsilon = 1$:\par
    if $n, m > N(1)$, $|a_n - a_m| < 1$.\par
    Then we can bound the terms. Set $m = N(1)$:
    \begin{equation*}
        |a_n| \leq 1 + |a_{N(1)}|~\forall n \geq N(1)
    \end{equation*}
    Then set $K = 1 + \max{\{|a_1|, |a_2|, \cdots, |a_{N(1)}|\}}$, and so $|a_n| \leq K$ for any $n$.\par
    Now by theorem~\ref{thmBolzanoWeierstrass}, there must be a convergent subsequence:\par
    There exists a real number $a$ and natural numbers $n_1 < n_2 < \cdots$ such that $a_{n_j} \to a$.\par
    Now we can argue that $a_n \to a$, since all the terms are arbitrarily close to the convergent subsequence.\par
    \begin{align}
        |a_n - a| &= |a_n - a_{n_j} + a_{n_j} - a| \nonumber \\
        &\leq |a_n - a_{n_j}| + |a_{n_j} - a| \label{eqnSumOfModTerms}
    \end{align}
    Then fix $\epsilon > 0$, and since $a_n$ is Cauchy there exists $N_1(\epsilon)$ such that $n, n_j \geq N_1(\epsilon)$, $|a_n - a_{n_j}| < \epsilon$.\par
    Also, since $a_{n_j} \to a$, there exists $N_2(\epsilon)$ such that if $j \geq N_2$ then $|a_{n_j} - a| < \epsilon$.\par
    Then choose $j$ such that $j \geq N_2(\epsilon)$ and $n_j \geq N_1(\epsilon)$. Now we have the two properties above we can say that, from equation~\ref{eqnSumOfModTerms},
    \begin{equation*}
        |a_n - a| < 2 \epsilon
    \end{equation*}
    and so $a_n \to a$.
\end{proof}
The combination of lemma~\ref{lemConvergeImpliesCauchy} and theorem~\ref{thmCauchyImpliesConverge} is known as the \\ \underline{General Principle of Convergence}: a real sequence converges if and only if it is a Cauchy sequence.
\begin{corollary}
    A complex sequence converges if and only if it is a Cauchy sequence.
    \label{corComplexCauchyConvergence}
\end{corollary}
\begin{proof}
    We can use equation~\ref{eqnComplexInequalities} to consider the two real sequences formed by the real part and the imaginary part. Then we see that the General Principle of Convergence holds for complex sequences by using the same method of proof as above, along with lemma~\ref{lemComplexConvergence}
\end{proof}
\section{Series}
\begin{definition}{Convergence of a series}
    Suppose $a_j$ is a sequence of real numbers. The series:
    \begin{equation*}
        \sum_{j=1}^{\infty} a_j
    \end{equation*}
    converges to a limit $S$ if the sequence of partial sums:
    \begin{equation*}
        S_N = \sum_{j=1}^{N} a_j
    \end{equation*}
    converges to $S$.\par
    In this case, write $\sum_{j=1}^\infty a_j = S$.
\end{definition}
Note that this definition also works if the numbers are all complex.
\begin{remark}
    Any problem about series can be rephrased to a problem about sequences, and any problem about sequences can be rephrased in terms of series.
\end{remark}
\subsection{Properties of Series}
\begin{propositions}{
        \label{eqnSeriesProperties}
    }
    \item If $\sum_{j=1}^\infty a_j$ and $\sum_{j=1}^\infty b_j$ converge, then any linear combination does. \label{propSeriesLinearCombo}
    \item Suppose there exists some $N$ such that $a_j = b_j, j \geq N$.
        Then $\sum_{j=1}^\infty a_j$ and $\sum_{j=1}^\infty b_j$ either both diverge or both converge. \label{propSameTailSeries}
\end{propositions}
\begin{proof}[of proposition \ref{propSameTailSeries}]
    Suppose $n \geq N$. Then:
    \begin{equation*}
        S_n = \sum_{j=1}^n a_j = \sum_{j=1}^{N-1}a_j + \sum_{j=N}^{n} a_j
    \end{equation*}
    and also
    \begin{align*}
        S_n &= \sum_{j=1}^n b_j = \sum_{j=1}^{N-1}b_j + \sum_{j=N}^{n} b_j \\
        &= S_n + \left(\sum_{j=1}^{N-1} b_j - \sum_{j=1}^{N-1} a_j\right) \\
        &= S_n + k
    \end{align*}
    Where $k$ does not depend on $n$.
\end{proof}
An important example is the geometric series:
\begin{definition}{Geometric series}
    Suppose $x$ is a real number, and take $a_n = x^{n-1}$.\par
    Then the \underline{geometric series} has partial sum:
    \begin{equation*}
        S_n = \sum_{j=1}^n a_j = 1 + x + x^2 + \cdots + x^{n-1}
    \end{equation*}
    and we have a closed form:
    \begin{equation*}
        S_n =
        \begin{cases}
            \frac{1 - x^n}{1 - x} & x \neq 1 \\
            n & x = 1
        \end{cases}
    \end{equation*}
\end{definition}
Now if, for a geometric series, $|x| < 1$, proposition \ref{propPowersLimit} shows that $x^n \to 0$ so $S_n \to \frac{1}{1-x}$.\par
Also, if $x > 1$ then $x^n = (1 + \delta)^n \geq 1 + n\delta$ by the binomial theorem, which diverges and so $S_n$ diverges.\par
In the case $x < -1$, which is the same as the $x > 1$ case but with alternating sign.\par
When $x = 1$, the sequence of partial sums is the sequence of natural numbers, which diverges. If $x = -1$, the series alternates between $1$ and $0$ and so diverges.
\subsection{Tests for Convergence}
A simple, but useful, result is the $n$th term test:
\begin{lemma}[$n$th term test]
    If $\sum_{j=1}^\infty a_j$ converges, then $a_j \to 0$ as $j \to \infty$.
    \label{lemNthTermTest}
\end{lemma}
\begin{proof}
    If $S_n$ is the $n$th partial sum, then $a_n = S_n - S_{n-1}$.\par
    If the series converges, then $S_n$ converges to a limit $S$. Also, $S_{n-1}$ must also tend to $S$ and so $a_n$ converges to $S - S = 0$.
\end{proof}
\begin{remark}
    This is most often used to show a series does not converge if the terms do not tend to 0.
\end{remark}
\begin{example}[Converse of lemma~\ref{lemNthTermTest} does not hold]
    Consider $\sum_{j=1}^\infty \frac{1}{j}$, the harmonic series.
    Then consider $S_{2n}$:
    \begin{align*}
        S_{2n} &= S_n + \frac{1}{n+1} + \frac{1}{n+2} \cdots \frac{1}{2n} \\
        &\geq S_n + \frac{1}{2n} + \cdots + \frac{1}{2n} \\
        &= S_n + \frac{1}{2}
    \end{align*}
    And now if $S_n \to S$ then $S_{2n} \to S$ and $S \geq S + \frac{1}{2}$ \contradiction\par
    The harmonic series diverges, and this is a counterexample to the converse of lemma~\ref{lemNthTermTest}.
\end{example}
\begin{theorem}[Comparison test]
    Suppose that two sequences $a_j$ and $b_j$ are such that $0 \leq b_j \leq a_j$ for any $j$.\par
    Then if $\sum_{j=1}^\infty a_j$ converges, then so does $\sum_{j=1}^\infty b_j$
    \label{thmComparisonTest}
\end{theorem}
\begin{proof}
    Let $S_n = \sum_{j=1}^n b_j$, and $D_n = \sum_{j=1}^n a_j$. Note that both are monotone increasing sequences, and that $D_n \to D$ as $n \to \infty$.\par
    Further, due to the bounds on the terms $S_n \leq D_n \leq D$.\par
    And now we have that $S_n$ is increasing and bounded above, so by the Fundamental Axiom of the Real Numbers, $S_n$ must converge.
\end{proof}
\begin{example}
    Consider $\sum_{j=1}^\infty \frac{1}{j^2}$. Then the terms of this sequence are certainly non-negative, and for $j \geq 2$ we can bound this above by $\frac{1}{j(j-1)}$. However, we can write this as:
    \begin{equation*}
        0 \leq \frac{1}{j^2} < \frac{1}{j-1} - \frac{1}{j} = a_j
    \end{equation*}
    Note that $a_j$ is telescoping: $\sum_{j=1}^n = 1 - \frac{1}{n}$ which converges to $1$.\par
    Then by theorem~\ref{thmComparisonTest}, the original series converges.
\end{example}
\begin{theorem}[Root test]
    Suppose that $a_n$ is a sequence of non-negative terms, and $\sqrt[n]{a_n}$ converges to a limit $a$.\par
    Then if $a < 1, \sum_{n=1}^{\infty} a_n$ converges, and if $a > 1, \sum_{n=1}^{\infty} a_n$ diverges.
    \label{thmRootTest}
\end{theorem}
\begin{proof}
    \begin{case}{$a < 1$}
        Then choose a value $r$ such that $a < r < 1$. After some number of terms, all $a_n$ are less than $r$ since $r > a$. We can see this from the definition of the limit:
        There exists a natural number $N$ such that, for any $\epsilon$:
        \begin{equation*}
            n \geq N \implies a - \epsilon < \sqrt[n]{a_n} < a + \epsilon
        \end{equation*}
        Then if $\epsilon = r - a, n \geq N$:
        \begin{align*}
            \sqrt[n]{a_n} &< r \\
            a_n &< r^n
        \end{align*}
        And since $r < 1$, the geometric series in $r$ converges, and so we have the requirements for theorem~\ref{thmComparisonTest}, and the series:
        \begin{equation*}
            \sum_{n=1}^\infty a_n
        \end{equation*}
        converges.
    \end{case}
    \begin{case}{$a > 1$}
        So there exists a natural number $N$ such that:
        \begin{equation*}
            a_n^{\frac{1}{n}} > 1 \implies a_n > 1
        \end{equation*}
        But this means that the terms $a_n$ do not tend to 0, and so by lemma~\ref{lemNthTermTest}, the series $a_n$ does not converge.
    \end{case}
\end{proof}
\begin{remark}
    In the case $a = 1$, the test fails as convergence and divergence are both possible. See example~\ref{exRootAndRatioFail}
\end{remark}
\begin{theorem}[Ratio test]
    Consider a sequence $a_n$ of strictly positive terms.\par
    Assume that the ratio of terms $\frac{a_{n+1}}{a_n}$ tends to a limit $l$.\par
    Then if $l < 1$, the series converges and if $l > 1$ the series diverges.
    \label{thmRatioTest}
\end{theorem}
\begin{remark}
    Like the last test, if $l = 1$ we have no conclusion. See example~\ref{exRootAndRatioFail}.
\end{remark}
\begin{proof}
    \begin{case}{$l < 1$}
        Again choose $r$ such that $l < r < 1$.\par
        Then from the definition of the limit, there is some $N$ such that:
        \begin{equation*}
            n \geq N \implies \frac{a_{n+1}}{a_n} < r
        \end{equation*}
        Then rewrite $a_n$ for $n \geq N$:
        \begin{equation*}
            a_n = \frac{a_n}{a_{n-1}} \frac{a_{n-1}}{a_{n-2}} \cdots \frac{a_{N+1}}{a_N} a_N
        \end{equation*}
        And we can bound this:
        \begin{equation*}
            a_n < a_N r^{n - N}
        \end{equation*}
        That is, $a_n < Kr^n$ where $K$ is independent of $n$.\par
        Now, since $\sum_{n = 1}^\infty Kr^n$ converges, by theorem~\ref{thmComparisonTest} the series $\sum_{n=1}^\infty a_n$ converges.
    \end{case}
    \begin{case}{$l > 1$}
        Then if $l > 1$, choose $r$ sch that $1 < r < l$, then there exists an $N$ such that:
        \begin{equation*}
            n \geq N \implies \frac{a_{n+1}}{a_n} > r
        \end{equation*}
        and by the same argument as the previous case, we bound $a_n$ below by $r^{n-N}a_N$, and so the terms do not tend to 0. By lemma~\ref{lemNthTermTest}, the series does not converge.
    \end{case}
\end{proof}
\begin{example}
    Consider $\sum_{n=1}^{\infty} \frac{n}{2^n}$. Then:
    \begin{equation*}
        \frac{a_{n+1}}{a_n} = \frac{n+1}{2^{n+1}} \frac{2^n}{n} = \frac{1}{2} \left(1 + \frac{1}{n}\right) \to \frac{1}{2}
    \end{equation*}
\end{example}
\begin{example}
    Consider the series $\sum_{n=1}^\infty \frac{1}{n}$.\par
    Here $\sqrt[n]{a_n} = \frac{1}{n^{\frac{1}{n}}}$\par
    \begin{align*}
        n^{\frac{1}{n}} &= (1 + \delta_n) \text{ for some positive } \delta_n \\
        n &= (1 + \delta_n)^n \\
        &>\frac{n(n+1)}{2} \delta_n^2 \\
        \delta_n^2 &< \frac{2}{n-1}
    \end{align*}
    And so $\delta_n$ tends to $0$, and $n^{-\frac{1}{n}}$ tends to 1.\par
    The ratio test also fails: $\frac{a_n}{a_{n+1}}$ converges to 1.\par
    However, consider also $\sum_{n=1}^\infty \frac{1}{n^2}$. Here $\sqrt[n]{a_n} = \frac{1}{n^{\frac{2}{n}}}$, which tends to 1, so the test fails. The ratio test fails also.\par
    However, we have already seen that the harmonic series diverges, and the sequence of inverse squares converges, so these are two examples to show that either outcome can happen in the $a = l = 1$ case for both tests.
    \label{exRootAndRatioFail}
\end{example}
\begin{theorem}[Cauchy's Condensation Test]
    Let $a_n$ be a decreasing sequence of positive terms.\par
    Then the series $\sum_{n=0}^\infty a_n$ converges if and only if the series
    \begin{equation*}
        \sum_{n=1}^\infty 2^n a_{2^n}
    \end{equation*}
    converges.
    \label{thmCauchyCondensation}
\end{theorem}
\begin{proof}
    Since $a_n$ is decreasing, this means we have:
    \begin{equation*}
        a_{2^k} \leq a_{2^{k-1}+i} \leq a_{2^{k-1}} \text{ where } 1 \leq i \leq 2^{k-1}
    \end{equation*}
    \begin{proofdirection}{$\Rightarrow$}{Assume the sum of $a_n$ converges}
        Create a correspondence between each term in $\sum_{n=1}^\infty 2^n a_{2^n}$ and a block of $2^{k-1}$ terms in the series of $a_n$.
        \begin{align*}
            2^{k-1} a_{2^k} &= a_{2^k} + \cdots + a_{2^k} \\
            &\leq a_{2^{k-1}+1} + a_{2^{k-1}+2} + \cdots + a_{2^{k-1}+2^{k-1}} \\
            &= \sum_{n=2^{k-1}+1}^{2^k} a_n
        \end{align*}
        Therefore we have:
        \begin{align*}
            \sum_{k=1}^{K} 2^{n-1} a_{2^k} &\leq \sum_{k=1}^{K} \left(\sum_{n=2^{k-1} + 1}^{2^k} a_n\right) \\
            &= \sum_{n=2}^{2^K} a_n \leq \sum_{n=1}^\infty a_n
        \end{align*}
        So we have shown that $\sum_{n=1}^K 2^k a_{2^k}$ is increasing in $K$ and bounded above by $2\sum_{n=1}^\infty a_n$, and therefore must converge.
    \end{proofdirection}
    \begin{proofdirection}{$\Leftarrow$}{Suppose that the sum $\sum 2^n a_{2^n}$ converges.}
        Create the same correspondence, but with the term $a_{2^{k-1}}$ instead of $a_{2^k}$ to have the other inequality:
        \begin{equation*}
            a_{2^{k-1}+1} + a_{2^{k-1}+2} + \cdots + a_{2^{k-1}+2^{k-1}} \leq a_{2^{k-1}} + \cdots + a_{2^{k-1}}
        \end{equation*}
        Which gives:
        \begin{equation*}
            \sum_{n=2^{k-1}+1}^{2^k} a_n \leq 2^{k-1} a_{2^{k-1}}
        \end{equation*}
        \begin{align*}
            \sum_{n=2}^{2^K} a_n &= \sum_{k=1}^K \sum_{n=2^{k-1}+1}^{2^k} a_n \\
            &\leq \sum_{k=1}^K 2^{k-1}a_{2^{k-1}} \\
            &\leq \sum_{n=1}^\infty 2^{n-1} a_{2^{n-1}}
        \end{align*}
        And since the series in $a_n$ is increasing, we have:
        \begin{equation*}
            \sum_{n=2}^N a_n \leq \sum_{n=2}^{2^N} a_n \leq \sum_{n=1}^\infty 2^{k-1}a_{2^{k-1}}
        \end{equation*}
        And therefore $\sum_{n=2}^\infty a_n$ is increasing and bounded above, so converges.
    \end{proofdirection}
\end{proof}
\begin{example}
    Consider:
    \begin{equation*}
        \sum_{n=1}^\infty \frac{1}{n^k}
    \end{equation*}
    This is a decreasing sequence of positive terms, so apply theorem~\ref{thmCauchyCondensation}.
    \begin{align*}
        2^n a_{2^n} &= 2^n \left(\frac{1}{2^n}\right)^k \\
        &= \left(2^{1-k}\right)^n
    \end{align*}
    Now we know that this converges if and only if $2^{1-k} < 1$, which means $k > 1$.\par
    So we now know:
    \begin{equation}
        \sum_{n=1}^\infty \frac{1}{n^k} \text{ converges if and only if } k > 1
        \label{eqnSumOfPowerReciprocals}
    \end{equation}
\end{example}
\begin{theorem}[Alternating Series Test]
    Suppose that $a_n$ is a decreasing sequence tending to 0 as $n \to \infty$.\par
    Then the series:
    \begin{equation*}
        \sum_{n=1}^\infty (-1)^{n+1} a_n
    \end{equation*}
    converges.
    \label{thmAlternatingSeriesTest}
\end{theorem}
\begin{proof}
    Let $S_n$ be the partial sum of $n$ terms of $\sum_{n=1}^\infty (-1)^{n+1} a_n$.\par
    \begin{align*}
        S_{2n} &= (a_1 - a_2) + (a_3 - a_4) + \cdots + (a_{2n-1} - a_{2n})
    \end{align*}
    Where each bracket is non-negative, and therefore $S_{2n}$ is increasing.
    \begin{align*}
        S_{2n+1} &= a_1 + (-a_2 + a_3) + \cdots + (-a_{2n} + a_{2n+1})
    \end{align*}
    Where each bracket is non-positive, and therefore $S_{2n+1}$ is decreasing.\par
    Now, $S_{2n+1} = S_{2n} + a_{2n+1} \geq S_{2n}$.\par 
    Therefore the subsequence:
    \begin{equation*}
        (S_{2n})_{n = 1}^\infty \geq S_1
    \end{equation*}
    So it is decreasing and bounded below, and so $S_{2n} \to S$.
    \begin{equation*}
        (S_{2n+1})_{n = 1}^\infty \leq S_2
    \end{equation*}
    So it is increasing and bounded above, and so $S_{2n+1} \to \tilde{S}$.\par
    However, $S_{2n+1} = S_{2n} + a_{2n_1}$, which in the limit $a_n \to 0$, so $S = \tilde{S}$.\par
    Then we can show convergence:\par
    Given $\epsilon > 0$, there exist $N_1$ and $N_2$ such that:
    \begin{align*}
        n \geq N_1 &\implies |S_{2n} - S| < \epsilon \\
        n \geq N_2 &\implies |S_{2n+1} - S| < \epsilon
    \end{align*}
    So choosing $n \geq \left(2\max{\{N_1, N_2\}}+1\right)$ then:
    \begin{equation*}
        |S_{n} - S| < \epsilon
    \end{equation*}
\end{proof}
\begin{example}
    Consider:
    \begin{equation*}
        \sum_{n=1}^\infty \frac{(-1)^{n+1}}{n}
    \end{equation*}
    And now if $a_n$ is $\frac{1}{n}$, theorem~\ref{thmAlternatingSeriesTest} gives us that the sequence converges.
\end{example}
\subsection{Absolute Convergence}
\begin{definition}{Absolute Convergence}
    Let $a_n$ be a sequence of complex numbers. If $\sum_{n=1}^\infty |a_n|$ converges, then the series $\sum_{n=1}^\infty a_n$ is \underline{absolutely convergent}
\end{definition}
This is useful as most of the tests require non-negative integers, and do not work with complex numbers. Therefore by taking moduli, we can show absolute convergence much more easily.
\begin{theorem}[Absolute convergence implies convergence]
    If $\sum_{n=1}^\infty a_n$ is absolutely convergent, then it is convergent.
    \label{thmAbsoluteImpliesConvergence}
\end{theorem}
\begin{proof}
    Let $S_n = \sum_{n=1}^n a_k$, and let $\bar{S_n} = \sum_{n=1}^n |a_k|$.\par
    Then suppose $n \leq m$. Then:
    \begin{align*}
        |S_m - S_n| &= |\sum_{k=n+1}^m a_k| \\
        &\leq \sum_{k=n+1}^m |a_k| \text{ by triangle inequality} \\
        &= \bar{S_m} - \bar{S_n}
    \end{align*}
    And we have that $(\bar{S_n})$ is convergent, so it is Cauchy. Therefore $(S_n)$ is Cauchy, and therefore it is convergent.
\end{proof}
Note that for this proof slightly more rigour might be needed instead of the last line. \\
\begin{remark}
    This is equivalent to the Fundamental Axiom of the Real Numbers.
\end{remark}
\begin{examples}{}
    \item $\sum_{n=1}^\infty \frac{(-1)^{n+1}}{n}$ is convergent, but not absolutely convergent (converse of theorem~\ref{thmAbsoluteImpliesConvergence} does not hold).
    \item $\sum_{n=1}^\infty \frac{z^n}{2^n}$ is a geometric series, and therefore converges absolutely if and only if $|z| < 2$. Also, if $|z| \geq 2$, then the terms do not tend to 0 so the series diverges.
\end{examples}
\begin{definition}{Conditional convergence}
    If $\sum_{n=1}^\infty a_n$ converges, but $\sum_{n=1}^\infty |a_n|$ does not converge, the series is \underline{conditionally convergent}
\end{definition}
Such series exhibit unusual behaviour: for example rearranging the terms can change the limit of the sequence (see Example Sheet 1, Q7).
\begin{definition}{Rearrangement of a sequence}
    Let $\sigma$ be a bijection $\N \mapsto \N$. Then the sequence $a'_n$ with $a'_n = a_{\sigma(n)}$ is a \underline{rearrangement} of $a_n$.
\end{definition}
\begin{theorem}
    If $a'_n = a_{\sigma(n)}$ is a rearrangement of $a_n$, and $\sum_{n=1}^\infty a_n$ is absolutely convergent, then:
    \begin{equation*}
        \sum_{n=1}^\infty a_n = \sum_{n=1}^\infty a'_n
    \end{equation*}
\end{theorem}
\begin{proof}
    Consider $\epsilon > 0$. Since $\sum_{n=1}^\infty |a_n|$ converges, there exists $N(\epsilon)$ such that:
    \begin{equation*}
        \sum_{n=N+1}^\infty |a_n| < \epsilon
    \end{equation*}
    Then choose $M(\epsilon)$ such that $M > \max\subsetselect{\sigma^{-1}(k)}{k \in \{1, \cdots, N\}}$.

    Then if $m \geq M$,
    \begin{equation*}
        \sum_{n=1}^\infty a_n - \sum_{n=1}^M a_{\sigma(n)} = \sum_{n \in K_m} a_n
    \end{equation*}
    Here $K_m = \{N+1, N+2, \cdots\} \backslash \{\text{finitely many terms}\}$.
    \begin{align*}
        \therefore& \left|\sum_{n=1}^\infty a_n - \sum_{n=1}^m a_{\sigma_n}\right| \\
        &\leq \sum_{n \in K_m} |a_n| \text{ by triangle inequality} \\
        &\leq \sum_{n=N+1}^\infty |a_n| < \epsilon
    \end{align*}
\end{proof}
\end{document}